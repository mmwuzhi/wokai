(this["webpackJsonp@wokai/front"]=this["webpackJsonp@wokai/front"]||[]).push([[0],{128:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(33),s=n.n(c),a=n(6),o=n(35),i=Object(o.b)({name:"user",initialState:{userData:{id:"",username:"",email:""},error:null,logged:!1},reducers:{loginSuccess:function(e,t){var n=t.payload;e.logged=!0,e.userData=n},loginFail:function(e,t){var n=t.payload;e.error=n.error},logoutSuccess:function(e,t){var n=t.payload;e.userData={id:"",username:"",email:""},e.logged=n}}}),l=i.actions,u=l.loginSuccess,d=l.loginFail,j=l.logoutSuccess,b=i.reducer,f=Object(o.a)({reducer:{user:b}}),m=(n(75),n(3)),x=n(15),h=(n(76),n(4)),p=n.n(h),O=n(21),v=n.n(O);p.a.interceptors.request.use((function(e){return v.a.start(),e}),(function(e){return Promise.reject(e)})),p.a.interceptors.response.use((function(e){return v.a.done(),e}),(function(e){return Promise.reject(e)})),v.a.configure({showSpinner:!1});var g=n(26),w=n(0),y=Object(w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),N=Object(w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})}),k=Object(w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),D=Object(w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),C=Object(w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),S=function(e){var t=Object(a.c)((function(e){return e.user})),n=Object(r.useState)(!1),c=Object(m.a)(n,2),s=c[0],o=c[1],i=Object(r.useRef)(null),l=Object(r.useState)(),u=Object(m.a)(l,2),d=u[0],j=u[1];Object(r.useEffect)((function(){j(i.current.offsetLeft-180);var e=function(){var e=i.current.offsetLeft-180;j(e)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var b=Object(g.classnames)("transition-all","duration-300","origin-top-right","absolute","right-0","top-14","z-50","w-56","mt-2","origin-top-right","bg-white","border","border-gray-200","divide-y","divide-gray-100","rounded-md","shadow-lg","outline-none",{"scale-95":!s,"-translate-y-2":!s,"opacity-0":!s,invisible:!s,"scale-100":s,"translate-y-0":s,"opacity-100":s,visible:s}),f=Object(g.classnames)("inset-0","fixed","z-0",{hidden:!s}),h=Object(g.classnames)("px-4","py-3",{hidden:!t.logged});return Object(w.jsx)("header",{className:"z-10 flex justify-center fixed w-full top-0 h-14 border border-blue-100 bg-white items-center",children:Object(w.jsxs)("div",{className:"flex items-center justify-between max-w-5xl w-full",children:[Object(w.jsxs)("div",{className:"flex items-center",children:[Object(w.jsx)("span",{onClick:e.handleSidebar,className:"block lg:hidden p-4 text-blue-300 cursor-pointer",children:C}),Object(w.jsx)(x.b,{to:"/",className:"pl-4 text-xl text-blue-300",children:"\u306a\u306b\u306a\u306b\u3055\u3044\u3068"})]}),Object(w.jsx)("div",{ref:i,className:"relative inline-block text-left z-10",children:Object(w.jsx)("span",{onClick:function(){o(!s)},className:"p-4 text-blue-300 cursor-pointer",children:Object(w.jsx)("button",{className:"transition ease-in-out rounded-md hover:text-gray-500 focus:outline-none focus:shadow-outline-blue",children:D})})}),Object(w.jsx)("div",{onClick:function(){return o(!1)},className:f}),Object(w.jsxs)("div",{style:{left:d},className:"transform ".concat(b),children:[Object(w.jsxs)("div",{className:h,children:[Object(w.jsx)("p",{className:"text-sm leading-5",children:"Signed in as"}),Object(w.jsx)("p",{className:"text-sm font-medium leading-5 text-gray-900 truncate",children:t.userData.email})]}),Object(w.jsxs)("div",{className:"py-1",children:[t.logged?Object(w.jsx)(x.c,{to:"/user/mypage",onClick:function(){return o(!1)},activeClassName:"active",className:"text-gray-700 flex justify-between w-full px-4 py-2 text-sm leading-5 text-left",children:"\u30de\u30a4\u30da\u30fc\u30b8"}):Object(w.jsx)(x.c,{to:"/user/signup",activeClassName:"active",onClick:function(){return o(!1)},className:"text-gray-700 flex justify-between w-full px-4 py-2 text-sm leading-5 text-left",children:"\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7"}),Object(w.jsx)("span",{tabIndex:-1,className:"flex justify-between w-full px-4 py-2 text-sm leading-5 text-left text-gray-700 cursor-not-allowed opacity-50","aria-disabled":"true",children:"Come Soon"})]}),Object(w.jsx)("div",{className:"py-1",children:t.logged?Object(w.jsx)(x.c,{to:"/user/logout",activeClassName:"active",onClick:function(){return o(!1)},className:"text-gray-700 flex justify-between w-full px-4 py-2 text-sm leading-5 text-left",children:"\u30ed\u30b0\u30a2\u30a6\u30c8"}):Object(w.jsx)(x.c,{to:"/user/login",onClick:function(){return o(!1)},activeClassName:"active",className:"text-gray-700 flex justify-between w-full px-4 py-2 text-sm leading-5 text-left",children:"\u30ed\u30b0\u30a4\u30f3"})})]})]})})},I=[{to:"/",icon:y,text:"\u30db\u30fc\u30e0\u30da\u30fc\u30b8"},{to:"/comment",icon:k,text:"\u30b3\u30e1\u30f3\u30c8"},{to:"/chat",icon:N,text:"\u30c1\u30e3\u30c3\u30c8"},{to:"/tool",icon:Object(w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-6 w-6",children:Object(w.jsx)("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),text:"\u30c4\u30fc\u30eb"}],E=function(e){return Object(w.jsx)("aside",{className:"".concat(e.class," p-3 flex bg-white flex-col"),children:Object(w.jsx)("nav",{children:Object(w.jsx)("ul",{className:"",children:I.map((function(t,n){return Object(w.jsx)("li",{children:Object(w.jsxs)(x.c,{to:t.to,exact:!0,onClick:e.handleSidebar,activeClassName:"active-nav",className:"nav-text",children:[t.icon,Object(w.jsx)("span",{className:e.toggleText,children:t.text})]})},n)}))})})})},L=function(e){var t=Object(g.classnames)("inset-0","fixed","z-20",{hidden:!e.sidebar});return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{onClick:e.handleSidebar,className:t}),Object(w.jsx)("div",{className:"".concat(e.toggleClass," opacity-1 transition-opacity"),children:Object(w.jsx)("div",{className:"z-50 ".concat(e.sidebar?"nav-menu active":"nav-menu"," top-14"),children:Object(w.jsx)(E,{class:"fixed w-48 h-screen border-r",handleSidebar:e.handleSidebar,toggleText:e.toggleText})})})]})},M=n(5),R=n(7),z=n.n(R),F=function(){var e=Object(r.useState)(new Date),t=Object(m.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=setInterval((function(){c(new Date)}),1e3);return function(){clearInterval(e)}}),[]),Object(w.jsx)("div",{style:{fontSize:"20px",fontWeight:"bold",color:"lightgray"},children:n.toLocaleTimeString("ja-JP",{hour12:!0})})},W=Object(w.jsx)("table",{className:"border-gray-100 border-2 text-center",children:Object(w.jsxs)("tbody",{children:[Object(w.jsx)("tr",{children:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"].map((function(e,t){return Object(w.jsx)("td",{className:"border-gray-100 border-2 p-1",children:e},t)}))}),function(e){for(var t,n=[[],[],[],[],[],[]],r=z()(e).date(1).weekday(),c=z()(e).subtract(1,"month").daysInMonth(),s=z()(e).daysInMonth(),a=0;a<7;a+=1)for(var o=c-r+a+1,i=0;i<6;i+=1)n[i][a]=(t=o+7*i)<=c?t:t<=c+s?t-c:t-(c+s);return n}(z()()).map((function(e,t){return Object(w.jsx)("tr",{children:e.map((function(e,n){return Object(w.jsx)("td",{className:"".concat(parseFloat(z()().format("DD"))===e&&e>=7*(t-1)&&e<=7*(t+1)?"bg-green-200":""," border-gray-100 border-2 p-1"),children:e},n)}))},t)}))]})}),A=function(){return Object(w.jsxs)(w.Fragment,{children:[W,Object(w.jsx)(F,{})]})},B=n(67),H=n.n(B),K=n(25),Y=n.n(K);z.a.updateLocale("ja",Y.a);var T=function(e){return Object(w.jsxs)("div",{className:"comment",children:[Object(w.jsxs)("div",{className:"comment-user",children:[Object(w.jsxs)("span",{className:"text-blue-500",children:[e.data.name,"\u3000"]}),Object(w.jsx)("span",{className:"comment-createdtime",children:z()(e.data.createdAt).format("YYYY\u5e74MM\u6708DD\u65e5 HH\u6642mm\u5206")})]}),Object(w.jsx)("span",{children:e.data.msg})]})},_=Object(r.forwardRef)((function(e,t){var n=Object(r.useState)(""),c=Object(m.a)(n,2),s=c[0],a=c[1],o=Object(r.useState)(""),i=Object(m.a)(o,2),l=i[0],u=i[1],d=Object(r.useState)(""),j=Object(m.a)(d,2),b=j[0],f=j[1],x=Object(r.useState)(""),h=Object(m.a)(x,2),p=h[0],O=h[1],v=Object(r.useRef)(null);Object(r.useImperativeHandle)(t,(function(){return{checkSubmit:g,focus:y,value:l,setValue:u,setFilled:a}})),Object(r.useEffect)((function(){a(l?"filled":"")}),[l]);var g=function(){l?(f(""),O("")):(f("border-red-500"),O("text-red-500"))},y=function(){v.current.focus()};return Object(w.jsxs)("div",{className:"mb-4 relative",children:[Object(w.jsx)("input",{className:"".concat(s," input border border-gray-200 appearance-none rounded w-full px-3 py-3 pt-5 pb-2 focus focus:border-blue-200 focus:outline-none active:outline-none active:border-blue-200 ").concat(b),id:e.forID,type:e.type,value:l,onChange:function(t){if(e.checkNaturalNumber){var n=t.target.value;(/^\d*?$/.test(n)&&n.length<4||""===n)&&u(t.target.value)}else u(t.target.value)},onKeyUp:function(){f(""),O("")},ref:v,onKeyDown:e.onKeyDown}),Object(w.jsx)("label",{htmlFor:e.forID,onClick:function(e){e.target.previousElementSibling.focus()},className:"label absolute mb-0 -mt-2 pt-4 pl-3 leading-tighter text-gray-400 text-base cursor-text ".concat(p),children:e.children})]})})),q=function(e){return Object(w.jsx)("button",{type:e.type,onClick:e.onClick,className:"border border-gray-200 bg-gray-200 text-gray-700 rounded-md px-4 py-2 m-2 transition duration-500 ease select-none hover:bg-gray-300 focus:outline-none focus:shadow-outline ".concat(e.className),children:e.children})},V=function(e){return Object(w.jsx)("button",{type:e.type,onClick:e.onClick,className:"border border-blue-400 bg-blue-400 text-white rounded-md px-4 py-2 m-2 transition duration-500 ease select-none hover:bg-blue-500 focus:outline-none focus:shadow-outline ".concat(e.className),children:e.children})};z.a.updateLocale("ja",Y.a);var J=H()();function P(){var e=Object(r.useState)([]),t=Object(m.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(),a=Object(m.a)(s,2),o=a[0],i=a[1],l=Object(r.useRef)(null),u=Object(r.useRef)(null);Object(r.useEffect)((function(){v.a.start();var e=!1;return J.emit("reqMsg",{}),J.on("sysMsg",(function(t){e||i(t)})),J.on("recvMsg",(function(t){e||(c(t),v.a.done())})),function(){e=!0}}),[]);var d=function(e){e.preventDefault(),l.current.checkSubmit(),u.current.checkSubmit(),l.current.value&&u.current.value&&(J.emit("sendMsg",{name:l.current.value,msg:u.current.value}),u.current.focus(),u.current.setValue(""),u.current.setFilled(""))};return Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{children:["\u30aa\u30f3\u30e9\u30a4\u30f3\u4eba\u6570\uff1a",o]}),Object(w.jsx)(_,{type:"text",forID:"user-name",ref:l,children:"\u30cb\u30c3\u30af\u30cd\u30fc\u30e0"}),Object(w.jsx)(_,{type:"textarea",forID:"msg",onKeyDown:function(e){"Enter"===e.key&&d(e)},ref:u,children:"\u30e1\u30c3\u30bb\u30fc\u30b8"}),Object(w.jsx)("div",{className:"flex justify-end",children:Object(w.jsx)(V,{className:"w-1/4",onClick:d,children:"\u9001\u4fe1"})}),Object(w.jsx)("div",{className:"msg-list",children:null===n||void 0===n?void 0:n.map((function(e,t){return Object(w.jsx)(T,{data:e,index:t},t)}))})]})}var U=function(e){var t=Object(a.c)((function(e){return e.user})),n=Object(r.useState)(""),c=Object(m.a)(n,2),s=c[0],o=c[1],i=Object(r.useState)(""),l=Object(m.a)(i,2),u=l[0],d=l[1],j=Object(r.useRef)(null),b=Object(r.useRef)(null);Object(r.useEffect)((function(){var e=!1;return p.a.get("/api/users/userInfo").then((function(t){e||(0===t.data.code?(o(t.data.data.username),j.current.focus()):b.current.focus())})),function(){e=!0}}),[]);var f=function(n){if(n.preventDefault(),e.onSubmit){var r=t.userData.email;e.onSubmit({username:s,email:r,content:u.trimEnd()})}d("")};return Object(w.jsxs)("div",{className:"comment-input",children:[Object(w.jsxs)("div",{className:"comment-field",children:[Object(w.jsx)("span",{className:"comment-field-name",children:"\u30e6\u30fc\u30b6\u540d\uff1a"}),Object(w.jsx)("div",{className:"comment-field-input",children:Object(w.jsx)("input",{value:s,ref:b,onChange:function(e){return o(e.target.value)}})})]}),Object(w.jsxs)("div",{className:"comment-field",children:[Object(w.jsx)("span",{className:"comment-field-name",children:"\u30b3\u30e1\u30f3\u30c8\uff1a"}),Object(w.jsx)("div",{className:"comment-field-input",children:Object(w.jsx)("textarea",{className:"h-24",ref:j,value:u,onChange:function(e){return d(e.target.value)},onKeyDown:function(e){e.ctrlKey&&"Enter"===e.key&&f(e)}})})]}),Object(w.jsx)("div",{className:"flex justify-end",children:Object(w.jsx)(V,{className:"w-20 sm:w-1/4",onClick:f,children:"\u6295\u7a3f"})})]})};z.a.updateLocale("ja",Y.a);var X=function(e){var t=Object(r.useState)(""),n=Object(m.a)(t,2),c=n[0],s=n[1],a=Object(r.useState)(""),o=Object(m.a)(a,2),i=o[0],l=o[1],u=Object(r.useRef)();Object(r.useEffect)((function(){return d(),u.current=window.setInterval(d,6e4),function(){clearInterval(u.current)}}));var d=function(){var t=z()(e.comment.createdAt);s(t.fromNow()),l(t.format("YYYY\u5e74MM\u6708DD\u65e5 HH\u6642mm\u5206"))};return Object(w.jsxs)("div",{className:"comment",children:[Object(w.jsxs)("div",{className:"comment-user text-sm",children:[Object(w.jsx)("span",{className:"text-blue-500",children:e.comment.username}),"\u30fb",Object(w.jsx)("span",{className:"text-gray-500 text-xs",title:i,children:c}),!!e.comment.email&&Object(w.jsx)("span",{onClick:function(){e.onDeleteComment&&e.onDeleteComment(e.comment._id)},className:"comment-delete",children:"\u524a\u9664"})]}),Object(w.jsx)("p",{dangerouslySetInnerHTML:{__html:e.comment.content}})]})},G=function(e){var t;return Object(w.jsx)(w.Fragment,{children:null===(t=e.comments)||void 0===t?void 0:t.map((function(t,n){return Object(w.jsx)(X,{comment:t,index:n,onDeleteComment:function(t){return function(t){e.onDeleteComment&&e.onDeleteComment(t)}(t)}},n)}))})},Q=function(){var e=Object(r.useState)(),t=Object(m.a)(e,2),n=t[0],c=t[1];Object(r.useEffect)((function(){s()}),[]);var s=function(){p.a.get("/api/comments/").then((function(e){c(e.data)})).catch((function(e){console.error(e)}))};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(U,{onSubmit:function(e){if(e)return e.username?e.content?void p.a.post("/api/comments/add",e).then(s).catch((function(e){alert("\u6295\u7a3f\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u3084\u308a\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),console.log(e)})):alert("\u30b3\u30e1\u30f3\u30c8\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\uff01"):alert("\u30e6\u30fc\u30b6\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\uff01")}}),Object(w.jsx)("div",{className:"bg-white p-5 border-2 border-gray-50",children:Object(w.jsx)(G,{comments:n,onDeleteComment:function(e){p.a.delete("/api/comments/"+e).then((function(t){console.log(t.data),c(n.filter((function(t){return t._id!==e})))})).catch((function(e){console.log(e)}))}})})]})},Z=n(8),$=n.n(Z),ee=n(14),te=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),c=0;c<n.length;++c)r[c]=n.charCodeAt(c);return r},ne=function(){var e=Object(ee.a)($.a.mark((function e(t,n,r){var c,s,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.serviceWorker.register("/serviceWorker.js",{scope:"/"});case 2:return c=e.sent,e.next=5,navigator.serviceWorker.ready;case 5:return e.next=7,c.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:te("BOVjyLKO6qyyTL_EkSuANUdMFfjCIdn26dDqXLBE69RKabZ5mQF6pU-GC9YJo01o5N9EOSs6nA_K8B1DqXqeIe8")});case 7:return s=e.sent,a={subscription:s,title:t,detail:n,timer:r},e.next=11,p.a.post("/api/subscribe/",a);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),re=function(e,t,n){"serviceWorker"in navigator&&ne(e,t,n).catch((function(e){return console.error(e)}))},ce=function(){var e=Object(r.useState)(""),t=Object(m.a)(e,2),n=t[0],c=t[1],s=Object(r.useRef)(),a=Object(r.useRef)(),o=Object(r.useRef)();Object(r.useEffect)((function(){i()}),[]);var i=function(){c(z()().format("HH:mm:ss"))};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{children:[Object(w.jsx)(_,{type:"text",forID:"title",ref:s,children:"\u30d7\u30c3\u30b7\u30e5\u30bf\u30a4\u30c8\u30eb"}),Object(w.jsx)(_,{type:"textarea",forID:"detail",ref:a,children:"\u30d7\u30c3\u30b7\u30e5\u5185\u5bb9"}),Object(w.jsx)(_,{type:"text",checkNaturalNumber:!0,forID:"timer",ref:o,children:"\u30bf\u30a4\u30de\u30fc\uff08\u5358\u4f4d\uff1a\u5206\uff09"}),Object(w.jsx)(V,{onClick:function(){re(s.current.value,a.current.value,1e3*parseInt(o.current.value)*60)},children:"\u30bb\u30c3\u30c8\u30d7\u30c3\u30b7\u30e5"})]}),Object(w.jsx)(F,{}),Object(w.jsxs)("div",{children:[Object(w.jsx)(V,{onClick:i,children:"\u30bf\u30a4\u30e0\u30bb\u30c3\u30c8"}),Object(w.jsxs)("div",{children:["\u30bb\u30c3\u30c8\u3055\u308c\u305f\u6642\u9593\uff1a",Object(w.jsx)("span",{children:n})]})]})]})},se=function(e){var t=Object(a.b)(),n=Object(a.c)((function(e){return e.user})),c=Object(r.useRef)(null),s=Object(r.useRef)(null),o=Object(r.useRef)(null),i=Object(r.useRef)(null);Object(r.useEffect)((function(){!0===n.logged&&e.history.push("/user/mypage")}),[n.logged,e.history]);return Object(w.jsxs)("div",{children:[Object(w.jsx)("h3",{className:"mt-3 mb-5",children:"\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7"}),Object(w.jsxs)("form",{onSubmit:function(e){(e.preventDefault(),o.current.value!==i.current.value)?alert("\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u4e00\u81f4\u3057\u3066\u3044\u306a\u3044\uff01"):function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n){var r,c;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.post("/api/users/",e);case 3:r=t.sent,c=r.data,n(u(c)),alert("\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7\u3057\u307e\u3057\u305f\uff01"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),p.a.isAxiosError(t.t0)&&t.t0.response&&400===t.t0.response.status&&n(d(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}({username:c.current.value,email:s.current.value,password:o.current.value})(t)},children:[Object(w.jsx)(_,{type:"text",forID:"user-name",ref:c,children:"\u30cb\u30c3\u30af\u30cd\u30fc\u30e0"}),Object(w.jsx)(_,{type:"email",forID:"e-mail",ref:s,children:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"}),Object(w.jsx)(_,{type:"password",forID:"password",ref:o,children:"\u30d1\u30b9\u30ef\u30fc\u30c9"}),Object(w.jsx)(_,{type:"password",forID:"confirm-password",ref:i,children:"\u30d1\u30b9\u30ef\u30fc\u30c9\u78ba\u8a8d"}),Object(w.jsx)(V,{type:"submit",children:"\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7"})]})]})},ae=function(){var e=Object(ee.a)($.a.mark((function e(t){var n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/api/users/userInfo");case 3:return 0===(n=e.sent).data.code&&t(u(n.data.data)),e.abrupt("return",n.data);case 8:if(e.prev=8,e.t0=e.catch(0),!p.a.isAxiosError(e.t0)||!e.t0.response||400!==e.t0.response.status){e.next=13;break}return t(d(e.t0.message)),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(e){var t=Object(a.b)(),n=Object(a.c)((function(e){return e.user})),c=Object(r.useRef)(null),s=Object(r.useRef)(null),o=Object(r.useRef)(null),i=Object(r.useRef)(null);Object(r.useEffect)((function(){Object(ee.a)($.a.mark((function n(){var r,s,a;return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ae(t);case 2:void 0!==(null===(s=n.sent)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.username)?c.current.setValue(null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.username):e.history.push("/user/login");case 4:case"end":return n.stop()}}),n)})))()}),[e.history,t]);return Object(w.jsxs)("div",{children:[Object(w.jsx)("h3",{className:"mt-3 mb-5",children:"\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u5909\u66f4"}),Object(w.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),o.current.value!==i.current.value);else{var r={username:c.current.value,email:n.userData.email,password:s.current.value,newPassword:o.current.value};p.a.post("/api/users/update",r).then((function(){alert("\u5909\u66f4\u3057\u307e\u3057\u305f\uff01"),e.history.push("/comment")})).catch((function(e){console.table(e)}))}},children:[Object(w.jsx)(_,{type:"text",forID:"user-name",ref:c,children:"\u30cb\u30c3\u30af\u30cd\u30fc\u30e0"}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{children:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9: "}),Object(w.jsx)("span",{children:n.userData.email})]}),Object(w.jsx)(_,{type:"password",forID:"old-password",ref:s,children:"\u30d1\u30b9\u30ef\u30fc\u30c9"}),Object(w.jsx)(_,{type:"password",forID:"new-password",ref:o,children:"\u65b0\u30d1\u30b9\u30ef\u30fc\u30c9"}),Object(w.jsx)(_,{type:"password",forID:"confirm-new-password",ref:i,children:"\u65b0\u30d1\u30b9\u30ef\u30fc\u30c9\u78ba\u8a8d"}),Object(w.jsx)(V,{type:"submit",children:"\u5909\u66f4"})]})]})},ie=function(e){var t=Object(a.b)(),n=Object(a.c)((function(e){return e.user})),c=Object(r.useRef)(null),s=Object(r.useRef)(null);Object(r.useEffect)((function(){!0===n.logged&&e.history.push("/comment")}),[n.logged,e.history]);var o=function(e){var n,r;e.preventDefault(),(n=c.current.value,r=s.current.value,function(){var e=Object(ee.a)($.a.mark((function e(t){var c,s,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={email:n,password:r},e.next=4,p.a.post("/api/users/login",c);case 4:s=e.sent,a=s.data,t(u(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),p.a.isAxiosError(e.t0)&&e.t0.response&&400===e.t0.response.status&&t(d(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())(t)};return Object(w.jsx)("div",{children:Object(w.jsxs)("form",{onSubmit:function(e){return o(e)},children:[Object(w.jsx)(_,{type:"email",forID:"mail-address",ref:c,children:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"}),Object(w.jsx)(_,{type:"password",forID:"now-password",ref:s,children:"\u30d1\u30b9\u30ef\u30fc\u30c9"}),Object(w.jsx)(V,{type:"submit",children:"\u30ed\u30b0\u30a4\u30f3"})]})})},le=function(e){var t=Object(a.b)(),n=Object(a.c)((function(e){return e.user.logged}));Object(r.useEffect)((function(){Object(ee.a)($.a.mark((function r(){var c;return $.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ae(t);case 2:0===(null===(c=r.sent)||void 0===c?void 0:c.code)&&!1!==n||e.history.push("/user/login");case 4:case"end":return r.stop()}}),r)})))()}),[n,t,e.history]);return Object(w.jsxs)("div",{children:[Object(w.jsx)("h3",{className:"",children:"\u306a\u306b\u306a\u306b\u3055\u3044\u3068\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3059\u304b\uff1f"}),Object(w.jsxs)("div",{className:"",children:[Object(w.jsx)(q,{onClick:function(){e.history.push("/")},children:"\u30ad\u30e3\u30f3\u30bb\u30eb"}),Object(w.jsx)(V,{onClick:function(){return function(e){p.a.get("/api/users/logout").then((function(){e(j(!1))})).catch((function(t){e(d(t))}))}(t)},children:"\u30ed\u30b0\u30a2\u30a6\u30c8"})]})]})},ue=function(){return Object(w.jsxs)("div",{className:"max-w-2xl w-full p-6",children:[Object(w.jsx)(M.a,{path:"/",exact:!0,component:A}),Object(w.jsx)(M.a,{path:"/chat",exact:!0,component:P}),Object(w.jsx)(M.a,{path:"/comment",component:Q}),Object(w.jsx)(M.a,{path:"/tool",exact:!0,component:ce}),Object(w.jsx)(M.a,{path:"/user/signup",component:se}),Object(w.jsx)(M.a,{path:"/user/mypage",component:oe}),Object(w.jsx)(M.a,{path:"/user/login",component:ie}),Object(w.jsx)(M.a,{path:"/user/logout",component:le})]})},de=function(){return Object(w.jsxs)("div",{className:"relative top-10 flex container justify-center mx-auto my-3",children:[Object(w.jsx)(E,{class:"hidden md:block w-16 lg:w-64",toggleText:"hidden lg:block"}),Object(w.jsx)(ue,{})]})},je=function(){var e=Object(a.b)(),t=Object(r.useState)(!1),n=Object(m.a)(t,2),c=n[0],s=n[1],o=function(){s(!c)};Object(r.useEffect)((function(){return ae(e),window.addEventListener("keydown",i),function(){window.removeEventListener("keydown",i)}}),[e]);var i=function(e){"Escape"===e.key&&s(!1)};return Object(w.jsx)("div",{className:"",children:Object(w.jsxs)(x.a,{children:[Object(w.jsx)(S,{handleSidebar:o}),Object(w.jsx)(L,{toggleClass:"block lg:hidden",handleSidebar:o,sidebar:c}),Object(w.jsx)(de,{})]})})};s.a.render(Object(w.jsx)(a.a,{store:f,children:Object(w.jsx)(je,{})}),document.getElementById("root"))},75:function(e,t,n){}},[[128,1,2]]]);